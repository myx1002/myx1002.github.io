<html>
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>Rediså­¦ä¹ ä¹‹è·¯(äºŒ)ï¼šå¸ƒéš†è¿‡æ»¤å™¨ | é¸¡æ¯›è’œçš®äº‹(â—&#39;â—¡&#39;â—)</title>

<link rel="shortcut icon" href="http://mofish.pily.life/favicon.ico?v=1689146956047">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="http://mofish.pily.life/styles/main.css">
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"> -->

<style>
    hr {
        margin-top: 1rem;
        margin-bottom: 1rem;
        border: 0;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script> -->
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <style>
    /* å¯¼èˆªæ æ ·å¼ */
    .navbar {
        position: relative;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -ms-flex-align: center;
        align-items: center;
        -ms-flex-pack: justify;
        justify-content: space-between;
        padding: 0.5rem 1rem;
    }

    .navbar-brand {
        display: inline-block;
        padding-top: 0.3125rem;
        padding-bottom: 0.3125rem;
        margin-right: 1rem;
        font-size: 1.25rem;
        line-height: inherit;
        white-space: nowrap;
    }

    .navbar-brand:hover,
    .navbar-brand:focus {
        text-decoration: none;
    }

    .navbar-nav {
        display: -ms-flexbox;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        padding-left: 0;
        margin-bottom: 0;
        list-style: none;
    }

    .navbar-collapse {
        -ms-flex-preferred-size: 100%;
        flex-basis: 100%;
        -ms-flex-positive: 1;
        flex-grow: 1;
        -ms-flex-align: center;
        align-items: center;
    }

    .navbar-toggler {
        padding: 0.25rem 0.75rem;
        font-size: 1.25rem;
        line-height: 1;
        background-color: transparent;
        border: 1px solid transparent;
        border-radius: 0.25rem;
    }

    .navbar-toggler:hover,
    .navbar-toggler:focus {
        text-decoration: none;
    }

    @media (min-width: 992px) {
        .navbar-expand-lg {
            -ms-flex-flow: row nowrap;
            flex-flow: row nowrap;
            -ms-flex-pack: start;
            justify-content: flex-start;
        }

        .navbar-expand-lg .navbar-nav {
            -ms-flex-direction: row;
            flex-direction: row;
        }

        .navbar-expand-lg .navbar-collapse {
            display: -ms-flexbox !important;
            display: flex !important;
            -ms-flex-preferred-size: auto;
            flex-basis: auto;
        }

        .navbar-expand-lg .navbar-toggler {
            display: none;
        }
    }

    @media (max-width: 991px) {
        #navbarSupportedContent {
            display: none;
        }
    }
</style>
<nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            é¸¡æ¯›è’œçš®äº‹(â—&#39;â—¡&#39;â—)
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/post/about" class="menu gt-a-link">
                    å…³äº
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1689146956047"
                action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = function () {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>
    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    Rediså­¦ä¹ ä¹‹è·¯(äºŒ)ï¼šå¸ƒéš†è¿‡æ»¤å™¨
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2021-04-27 Â·
                    </time>
                    
                        <a href="http://mofish.pily.life/tag/P-RRy8DydH/" class="post-tags">
                            # redis
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>ğŸ“± æ—¥å¸¸æˆ‘ä»¬åˆ·æŠ–éŸ³çš„æ—¶å€™ï¼Œå®ƒéƒ½ä¼šä¸åœåœ°ç»™æˆ‘ä»¬æ¨èæ–°çš„å†…å®¹ï¼Œè€Œæ¯æ¬¡æ¨èæ—¶éƒ½è¦å»é‡ï¼Œ<br>
ğŸ˜®å¦‚æœæˆ‘ä»¬æ¯æ¬¡å»é‡æ—¶éƒ½è¦é¢‘ç¹åœ°å¯¹æ•°æ®åº“è¿›è¡ŒexistsæŸ¥è¯¢ï¼Œå½“ç³»ç»Ÿå¹¶å‘é‡é«˜æ—¶ï¼Œæ•°æ®åº“æ˜¯å¾ˆéš¾æ‰›å¾—ä½çš„<br>
ğŸ˜•è€Œå½“æˆ‘ä»¬æŠŠè¿™äº›å†å²è®°å½•éƒ½ç¼“å­˜èµ·æ¥å‘¢ï¼Ÿé‚£å†…å­˜å¯èƒ½ç›´æ¥çˆ†æ‰äº†ï¼Œéšç€æ—¶é—´çš„æ¨èï¼Œå ç”¨çš„ç©ºé—´ä¼šè¶Šæ¥è¶Šå¤§ï¼Œé‚£ä¹ˆæœ‰å•¥æ•ˆç‡é«˜ã€å ç”¨å°çš„æ–¹æ³•å‘¢ï¼Ÿ</p>
<!-- more -->
<center>ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡ğŸ‘‡</center>
<br>
<p>æ²¡é”™ï¼Œå°±æ˜¯<strong>å¸ƒéš†è¿‡æ»¤å™¨</strong>ï¼ï¼ğŸ‘ğŸ‘<br>
å®ƒå°±æ˜¯ä¸“é—¨ç”¨æ¥è§£å†³è¿™ç§å»é‡é—®é¢˜çš„ï¼Œå®ƒåœ¨èµ·åˆ°å»é‡ä½œç”¨çš„åŒæ—¶ï¼Œåœ¨ç©ºé—´ä¸Šè¿˜èƒ½å¤§å¤§èŠ‚çœï¼Œ<br>
è™½ç„¶ç¨å¾®æœ‰ä¸€ç‚¹ç‚¹ä¸ç²¾ç¡®ï¼Œæœ‰ä¸€ç‚¹ç‚¹è¯¯åˆ¤æ¦‚ç‡ï¼Œä½†æ˜¯åªè¦å‚æ•°è®¾ç½®å¾—åˆç†ï¼Œç²¾ç¡®åº¦è¿˜æ˜¯èƒ½æ§åˆ¶çš„ğŸ‘ğŸ‘</p>
<figure data-type="image" tabindex="1"><img src="http://mofish.pily.life/post-images/1619616257498.jfif" alt="" width="200" height="200" loading="lazy"></figure>
<h2 id="ä¸€-å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä»€ä¹ˆ">ä¸€ã€å¸ƒéš†è¿‡æ»¤å™¨æ˜¯ä»€ä¹ˆï¼ŸğŸ¤·â€â™‚</h2>
<p>æˆ‘ä»¬å…¶å®å¯ä»¥æŠŠå®ƒç†è§£ä¸ºä¸€ä¸ªä¸ç®—éå¸¸ç²¾ç¡®çš„setç»“æ„ï¼Œå½“å®ƒè¯´æŸä¸ªå€¼å­˜åœ¨æ—¶ï¼Œè¿™ä¸ªå€¼ä¸èƒ½ä¸å­˜åœ¨ï¼Œä½†å®ƒè¯´è¿™ä¸ªå€¼ä¸å­˜åœ¨æ—¶ï¼Œé‚£ä¹ˆä¸€å®šä¸å­˜åœ¨ã€‚</p>
<p>ä¸¾ä¸ªç°å®ç”Ÿæ´»ä¸­çš„ä¾‹å­ï¼Œå°±æ˜¯å½“ä¸€ä¸ªäººè¯´è®¤è¯†ä½ çš„æ—¶å€™ï¼Œå¯èƒ½åªæ˜¯æœ‰ä¸ªæœ‹å‹è·Ÿä½ é•¿å¾—å¾ˆåƒï¼Œè¯¯è®¤ä¸ºæ˜¯ä½ ï¼Œå½“å®ƒè¯´ä¸è®¤è¯†ä½ çš„æ—¶å€™ï¼Œå°±çœŸçš„ä¸è®¤è¯†ä½ äº†ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨éƒ¨åˆ†éœ€è¦è¿‡æ»¤å¤§é‡æ•°æ®ï¼Œé¿å…é‡å¤æ—¶ï¼Œå°±å¯ä»¥ç”¨åˆ°<code>å¸ƒéš†è¿‡æ»¤å™¨</code>ï¼Œåœ¨åˆç†çš„å‚æ•°è®¾ç½®ä¸‹ï¼Œå¯ä»¥ç²¾å‡†çš„è¿‡æ»¤æ‰é‡å¤æ•°æ®ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼šRediså®˜æ–¹æä¾›çš„å¸ƒéš†è¿‡æ»¤å™¨åˆ°äº†Redis4.0æä¾›äº†æ’ä»¶åŠŸèƒ½ä¹‹åæ‰æ­£å¼ç™»åœºã€‚</p>
</blockquote>
<!-- more -->
<h2 id="äºŒ-å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬ç”¨æ³•ï¸">äºŒã€å¸ƒéš†è¿‡æ»¤å™¨çš„åŸºæœ¬ç”¨æ³•âœï¸</h2>
<blockquote>
<p>ä½¿ç”¨å‰è®°å¾—ç¡®ä¿ç‰ˆæœ¬&gt;4.0ï¼Œå¹¶ä¸”å®‰è£…äº†Rebloomæ’ä»¶å™¢ğŸ˜²<br>
å¯å‚è€ƒï¼šhttps://www.jianshu.com/p/2cc55cd1e13a</p>
</blockquote>
<p><code>bf.add</code>å’Œ<code>bf.madd</code>ï¼Œä¸€ä¸ªæ˜¯æ·»åŠ ä¸€ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæ˜¯æ‰¹é‡æ·»åŠ å…ƒç´ <br>
<code>bf.exists</code>å’Œ<code>bf.exists</code>ï¼Œä¸€ä¸ªæ˜¯æŸ¥è¯¢å•ä¸ªå…ƒç´ ï¼Œä¸€ä¸ªæ˜¯æ‰¹é‡æŸ¥è¯¢<br>
ä¸‹é¢æˆ‘ä»¬æ¥ç”¨ç”¨çœ‹ï¼š</p>
<pre><code class="language-redis">127.0.0.1:6379&gt; bf.add users user1
(integer) 1
127.0.0.1:6379&gt; bf.add users user2
(integer) 1
127.0.0.1:6379&gt; bf.add users user3
(integer) 1
127.0.0.1:6379&gt; bf.exists users user4
(integer) 0
127.0.0.1:6379&gt; bf.madd users user4 user5 user6 user7
1) (integer) 1
2) (integer) 1
3) (integer) 1
4) (integer) 1
127.0.0.1:6379&gt; bf.mexists users user4 user3 user8
1) (integer) 1
2) (integer) 1
3) (integer) 0
</code></pre>
<br>
ç†Ÿæ‚‰äº†åŸºæœ¬å‘½ä»¤åï¼Œæˆ‘ä»¬å°è¯•ä¸€ä¸‹ç”¨è„šæœ¬æµ‹è¯•ä¸€ä¸‹ï¼Œå¤§æ¦‚çš„æµ‹è¯•æµç¨‹å°±æ˜¯æ’å…¥50000ä¸ªå…ƒç´ ï¼Œç„¶åç”¨å¦å¤–ä¸åŒçš„50000ä¸ªå…ƒç´ å»æ£€æµ‹ï¼Œçœ‹çœ‹æ˜¯å¦æœ‰æ£€æµ‹å¤±è´¥çš„ã€‚
<blockquote>
<p>å¦‚ç”¨ä¸ä½¿ç”¨bf.reserveï¼Œé»˜è®¤çš„error_rateæ˜¯0.01ï¼Œé»˜è®¤çš„initial_sizeæ˜¯100ä¸ªå…ƒç´ <br>
error_rateè¶Šä½ï¼Œéœ€è¦çš„ç©ºé—´è¶Šå¤§<br>
initial_sizeè¡¨ç¤ºé¢„è®¡æ–¹æ³•çš„å…ƒç´ æ•°é‡ï¼Œå½“å®é™…æ•°é‡è¶…å‡ºè¿™ä¸ªæ•°å€¼æ—¶ï¼Œè¯¯åˆ¤ç‡ä¼šä¸Šå‡ï¼Œå› æ­¤éœ€è¦æå‰è®¾ç½®ä¸€ä¸ªè¾ƒå¤§çš„å€¼<br>
ä½¿ç”¨bf.reserveå‘½ä»¤å‰ï¼Œéœ€è¦ç¡®ä¿å¯¹åº”çš„keyä¸å­˜åœ¨ï¼Œä¸ç„¶ä¼šæŠ¥é”™</p>
</blockquote>
<h2 id="ä¸‰-ç®€å•ä»£ç ç¤ºä¾‹php">ä¸‰ã€ç®€å•ä»£ç ç¤ºä¾‹(PHP)</h2>
<pre><code class="language-php">&lt;?php

$redis = new Redis();
$redis-&gt;connect('127.0.0.1', '6379');
$redis-&gt;auth('xxxxxxxx');

// å¦‚æœä¸ä½¿ç”¨bf.reserveï¼Œé»˜è®¤initial_size=100ï¼Œerror_rate=0.01
// å¯åœ¨é¢„ä¼°æˆå‘˜æ•°é‡æ—¶ï¼Œé€‚å½“çš„è°ƒæ•´initial_size
// è°ƒæ•´å‰ç¡®ä¿è¿™ä¸ªkeyæ˜¯ä¸å­˜åœ¨çš„ï¼Œä¸ç„¶ä¼šæŠ¥é”™ï¼šERR item exists
$redis-&gt;rawCommand('del', 'users');
$redis-&gt;rawCommand('bf.reserve', 'users', 0.01, 50000);

$exists = 0;
for ($i = 1; $i &lt;= 100000; $i++)
{
    // å‰50000ä¸ªæ’å…¥
    if ($i &lt;= 50000) {
        $redis-&gt;rawCommand('bf.add', 'users', $i);
    } else {
        $check = $redis-&gt;rawCommand('bf.exists', 'users', $i);
        $check != 1 ? : $exists++;
    }
}

echo $exists . PHP_EOL;
echo round($exists / 50000, 3);
</code></pre>
<blockquote>
<p>ç»“æœ<br>
è¯¯å·®æ•°ï¼š304    è¯¯å·®ç‡ï¼š0.006</p>
</blockquote>
<p>å¦‚æœæŠŠ<code>error_rate</code>è®¾ä¸º0.001çš„è¯ï¼Œç»“æœå¦‚ä¸‹</p>
<blockquote>
<p>ç»“æœ<br>
è¯¯å·®æ•°ï¼š1    è¯¯å·®ç‡ï¼š0</p>
</blockquote>
<p>Psï¼šå¸ƒéš†è¿‡æ»¤å™¨çš„<code>initial_size</code>è®¾ç½®<code>è¿‡å¤§</code>ï¼Œä¼š<code>æµªè´¹å­˜å‚¨ç©ºé—´</code>ï¼Œè®¾ç½®å¾—<code>è¿‡å°</code>ï¼Œå°±ä¼š<code>å½±å“å‡†ç¡®ç‡</code>ï¼Œå› æ­¤ç”¨æˆ·åœ¨ä½¿ç”¨ä¹‹å‰ä¸€å®šè¦å°½å¯èƒ½<code>ç²¾ç¡®çš„ä¼°è®¡å…ƒç´ æ•°é‡</code>ï¼Œè¿˜éœ€è¦åŠ ä¸Šä¸€å®šçš„å†—ä½™ç©ºé—´ä»¥é¿å…å®é™…å…ƒç´ å¯èƒ½ä¼šæ„å¤–é«˜å‡ºä¼°è®¡å€¼è®¸å¤šã€‚</p>
<!-- more -->
<h2 id="å››-å¸ƒéš†è¿‡æ»¤å™¨çš„åŸç†ä½æ•°ç»„hashç®—æ³•">å››ã€å¸ƒéš†è¿‡æ»¤å™¨çš„åŸç†ï¼ˆä½æ•°ç»„+hashç®—æ³•ï¼‰</h2>
<p>æ¯ä¸ªå¸ƒéš†è¿‡æ»¤å™¨å¯¹åº”åˆ°Redisçš„æ•°æ®ç»“æ„é‡Œé¢å°±æ˜¯ä¸€ä¸ªå¤§å‹çš„ä½æ•°ç»„å’Œå‡ ä¸ªä¸ä¸€æ ·çš„æ— åhashå‡½æ•°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºçš„HASH1ã€HASH2ã€HASH3å°±æ˜¯è¿™æ ·çš„hashå‡½æ•°ã€‚</p>
<figure data-type="image" tabindex="2"><img src="http://mofish.pily.life/post-images/1620658969448.PNG" alt="" width="400" height="400" loading="lazy"></figure>
<p>è€Œæ‰€è°“çš„<code>æ— å</code>å°±æ˜¯èƒ½æŠŠå…ƒç´ çš„hashå€¼ç®—çš„æ¯”è¾ƒå‡åŒ€ï¼Œè®©å…ƒç´ è¢«hashæ˜ å°„åˆ°ä½æ•°ç»„ä¸­çš„ä½ç½®æ¯”è¾ƒéšæœºã€‚</p>
<h3 id="æ·»åŠ å…ƒç´ æ­¥éª¤">æ·»åŠ å…ƒç´ (æ­¥éª¤)</h3>
<ol>
<li>ä½¿ç”¨å¤šä¸ªhashå‡½æ•°å¯¹keyè¿›è¡Œhashè®¡ç®—ï¼Œç®—çš„ä¸€ä¸ªæ•´æ•°çš„ç´¢å¼•å€¼</li>
<li>ç„¶åå¯¹ä½æ•°ç»„é•¿åº¦è¿›è¡Œå–æ¨¡è¿ç®—å¾—åˆ°ä¸€ä¸ªä½ç½®ï¼Œæ¯ä¸ªhashå‡½æ•°éƒ½ä¼šç®—çš„ä¸€ä¸ªä¸åŒçš„ä½ç½®</li>
<li>åœ¨æŠŠä½æ•°ç»„çš„è¿™å‡ ä¸ªä½ç½®éƒ½ç½®ä¸º1ï¼Œå°±å®Œæˆäº†æ·»åŠ æ“ä½œ</li>
</ol>
<h3 id="æŸ¥æ‰¾å…ƒç´ ">æŸ¥æ‰¾å…ƒç´ </h3>
<p>å…¶å®ä¸æ·»åŠ ä¸€æ ·ï¼Œéƒ½æ˜¯ä½¿ç”¨å¤šä¸ªhashå‡½æ•°è®¡ç®—ï¼Œæ‰¾åˆ°ä½æ•°ç»„ä¸­å¯¹åº”çš„å€¼ï¼Œç„¶åæ£€æŸ¥è¿™å‡ ä¸ªä½ç½®æ˜¯å¦éƒ½æ˜¯1ï¼Œå¦‚æœæœ‰ä¸€ä¸ªæ˜¯0ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªå€¼ä¸å­˜åœ¨ã€‚</p>
<p>ä½†æ˜¯å¦‚æœéƒ½æ˜¯1çš„è¯ï¼Œä¹Ÿå¯èƒ½æ˜¯å› ä¸ºå…¶å®ƒçš„å€¼å­˜åœ¨æ‰€å¯¼è‡´çš„ã€‚</p>
<blockquote>
<p>å› æ­¤å¦‚æœè¿™ä¸ªä½æ•°ç»„æ¯”è¾ƒç¨€ç–ï¼Œåˆ¤æ–­æ­£ç¡®çš„æ¦‚ç‡ä¼šå¤§å¾ˆå¤š<br>
å¦‚æœè¿™ä¸ªä½æ•°ç»„æ¯”è¾ƒæ‹¥æŒ¤ï¼Œé‚£ä¹ˆåˆ¤æ–­æ­£ç¡®çš„æ¦‚ç‡å°±ä¼šå¤§å¤§é™ä½<br>
æ‰€ä»¥å½“è¿”å›çš„ç»“æœè¯´ä½ ä¸å­˜åœ¨æ—¶å°±çœŸçš„ä¸å­˜åœ¨ï¼Œè€Œè¯´ä½ å­˜åœ¨æ—¶ï¼Œå¯èƒ½ä¸å­˜åœ¨ã€‚</p>
</blockquote>
<h3 id="æ³¨æ„ç‚¹">æ³¨æ„ç‚¹</h3>
<p>ä½¿ç”¨æ—¶ä¸è¦è®©å®é™…å…ƒç´ æ•°é‡è¿œå¤§äºåˆå§‹åŒ–æ•°é‡ï¼Œå½“å®é™…å…ƒç´ æ•°é‡å¼€å§‹è¶…å‡ºåˆå§‹åŒ–æ•°é‡æ—¶ï¼Œåº”è¯¥å¯¹å¸ƒéš†è¿‡æ»¤å™¨è¿›è¡Œé‡å»ºï¼Œé‡æ–°åˆ†é…ä¸€ä¸ªsizeæ›´å¤§çš„è¿‡æ»¤å™¨ï¼Œå†å°†æ‰€æœ‰å†å²å…ƒç´ æ‰¹é‡æ·»åŠ è¿›å»ã€‚</p>
<p>å› ä¸ºerror_rateä¸ä¼šå› ä¸ºæ•°é‡åˆšä¸€è¶…å‡ºå°±æ€¥å‰§å¢åŠ ï¼Œè¿™ç»™æˆ‘ä»¬é‡å»ºè¿‡æ»¤å™¨æä¾›äº†è¾ƒä¸ºå®½æ¾çš„æ—¶é—´ã€‚</p>
<h2 id="äº”-ä¼˜ç¼ºç‚¹">äº”ã€ä¼˜ç¼ºç‚¹</h2>
<h3 id="ä¼˜åŠ¿çœç©ºé—´é«˜æ€§èƒ½">ä¼˜åŠ¿ï¼šçœç©ºé—´+é«˜æ€§èƒ½</h3>
<p><strong>çœç©ºé—´</strong><br>
å¦‚æœæ˜¯çœŸå®å­˜å‚¨ä¸€ä¸ªURL(64B)çš„è¯ï¼Œç»è¿‡hashå‡½æ•°å¯¹åº”ç€ä¸€ä¸ªæ•°ç»„ä½(æ¯”ç‰¹ä½)ï¼Œè¿™æ ·ç©ºé—´æ¯”ä¾‹å¤§çº¦æ—¶64*8 : 1ï¼Œå³512 : 1ï¼Œå› æ­¤ç”¨æ¥å­˜å‚¨åˆ¤æ–­æ˜¯å¦å­˜åœ¨çš„æ•°æ®æ¥è¯´ï¼Œå¸ƒéš†è¿‡æ»¤å™¨çš„ç©ºé—´æ•ˆç‡æ˜¯æå…¶é«˜æ•ˆçš„ã€‚</p>
<p><strong>é«˜æ€§èƒ½</strong><br>
BloomFilter ä¸å­˜åœ¨åƒé“¾è¡¨æŸ¥è¯¢ä¸€æ ·ï¼Œéœ€è¦ä¸€ä¸ªä¸€ä¸ªå»éå†ã€‚åè€Œä¼šåƒæ•°ç»„ä¸€æ ·ï¼Œç±»ä¼¼äºç›´æ¥å–ä¸‹æ ‡å°±å¯ä»¥æ‰¾åˆ°æ‰€éœ€è¦çš„ç»“æœã€‚</p>
<p>ä¸åŒçš„æ˜¯ï¼ŒBloomFilter éœ€è¦è¿‡å‡ ä¸ªhash functionï¼Œå»æŸ¥æ‰¾ä¸‹æ ‡ã€‚æ‰€ä»¥ï¼Œç»¼åˆæ¥çœ‹ï¼Œæ€§èƒ½æ˜¯å¾ˆé«˜çš„ï¼</p>
<p>ç»¼åˆæ—¶é—´å’Œç©ºé—´æ•ˆç‡ï¼Œåœ¨æœ‰å¾ˆä½çš„è¯¯è¯†åˆ«ç‡æƒ…å†µä¸‹ï¼Œå„æ–¹é¢éƒ½æ˜¯è¿œè¶…å…¶ä»–ç®—æ³•çš„ã€‚</p>
<h3 id="ä¸è¶³æœ‰è¯¯åˆ¤ä¸èƒ½åˆ é™¤å…ƒç´ ">ä¸è¶³ï¼šæœ‰è¯¯åˆ¤+ä¸èƒ½åˆ é™¤å…ƒç´ </h3>
<p><strong>æœ‰è¯¯åˆ¤</strong><br>
å› ä¸ºhashå¯èƒ½ä¼šå­˜åœ¨å†²çªï¼Œä»è€Œå¯¼è‡´ä¸å­˜åœ¨çš„å…ƒç´ å¯èƒ½ä¹Ÿä¼šè¢«ä¼šåˆ¤ä¸ºå­˜åœ¨ã€‚</p>
<p>å› æ­¤ä½¿ç”¨Redisçš„å¸ƒéš†è¿‡æ»¤å™¨æ—¶ï¼Œè¦åˆç†çš„è®¾ç½®ä½æ•°ç»„å¤§å°å’Œè¯¯åˆ¤ç‡ï¼Œå°½é‡æŠŠè¯¯åˆ¤ç‡æ§åˆ¶åœ¨è‡ªå·±å¯ä»¥æ¥å—çš„èŒƒå›´å†…ã€‚</p>
<p><strong>ä¸èƒ½åˆ é™¤å…ƒç´ </strong><br>
ä¸ç”¨å…ƒç´ é€šè¿‡hashå‡½æ•°ä½¿å¾—å¯¹åº”ä½ç½®éƒ½ç½®ä¸º1äº†ï¼Œæ‰€ä»¥å¦‚æœæŠŠå…¶ç½®ä¸º0çš„è¯ï¼Œä¼šå½±å“åˆ°å…¶å®ƒå…ƒç´ ï¼Œå› æ­¤æ˜¯ç»å¯¹ä¸èƒ½åˆ é™¤ã€‚</p>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="http://mofish.pily.life/post/design_patterns_08/" class="post-title gt-a-link">
                    ç¡¬å•ƒè®¾è®¡æ¨¡å¼(å…«)ï¼šä»£ç†æ¨¡å¼
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">æ‰“å·¥äººï¼æ‰“å·¥é­‚ï¼æˆ‘çˆ±æ‰“å·¥ï¼</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/myx1002/myx1002.github.io" target="_blank">Moyuxing</a>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="http://mofish.pily.life/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
