<html>
<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>MySqlå­¦ä¹ ä¹‹è·¯(åäº”)ï¼šæ…¢æŸ¥è¯¢æ—¥å¿— | é¸¡æ¯›è’œçš®äº‹(â—&#39;â—¡&#39;â—)</title>

<link rel="shortcut icon" href="http://mofish.pily.life/favicon.ico?v=1689146956047">

<link href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" rel="stylesheet">
<link rel="stylesheet" href="http://mofish.pily.life/styles/main.css">
<!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/css/bootstrap.min.css"> -->

<style>
    hr {
        margin-top: 1rem;
        margin-bottom: 1rem;
        border: 0;
        border-top: 1px solid rgba(0, 0, 0, 0.1);
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dockerfile.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.15.10/languages/dart.min.js"></script>

<!-- <script src="https://cdn.jsdelivr.net/npm/moment@2.27.0/moment.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script> -->
<!-- <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.0/dist/js/bootstrap.min.js"></script> -->
<!-- DEMO JS -->
<!--<script src="media/scripts/index.js"></script>-->


    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.css">
</head>
<body>
<div class="main gt-bg-theme-color-first">
    <style>
    /* å¯¼èˆªæ æ ·å¼ */
    .navbar {
        position: relative;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-wrap: wrap;
        flex-wrap: wrap;
        -ms-flex-align: center;
        align-items: center;
        -ms-flex-pack: justify;
        justify-content: space-between;
        padding: 0.5rem 1rem;
    }

    .navbar-brand {
        display: inline-block;
        padding-top: 0.3125rem;
        padding-bottom: 0.3125rem;
        margin-right: 1rem;
        font-size: 1.25rem;
        line-height: inherit;
        white-space: nowrap;
    }

    .navbar-brand:hover,
    .navbar-brand:focus {
        text-decoration: none;
    }

    .navbar-nav {
        display: -ms-flexbox;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        padding-left: 0;
        margin-bottom: 0;
        list-style: none;
    }

    .navbar-collapse {
        -ms-flex-preferred-size: 100%;
        flex-basis: 100%;
        -ms-flex-positive: 1;
        flex-grow: 1;
        -ms-flex-align: center;
        align-items: center;
    }

    .navbar-toggler {
        padding: 0.25rem 0.75rem;
        font-size: 1.25rem;
        line-height: 1;
        background-color: transparent;
        border: 1px solid transparent;
        border-radius: 0.25rem;
    }

    .navbar-toggler:hover,
    .navbar-toggler:focus {
        text-decoration: none;
    }

    @media (min-width: 992px) {
        .navbar-expand-lg {
            -ms-flex-flow: row nowrap;
            flex-flow: row nowrap;
            -ms-flex-pack: start;
            justify-content: flex-start;
        }

        .navbar-expand-lg .navbar-nav {
            -ms-flex-direction: row;
            flex-direction: row;
        }

        .navbar-expand-lg .navbar-collapse {
            display: -ms-flexbox !important;
            display: flex !important;
            -ms-flex-preferred-size: auto;
            flex-basis: auto;
        }

        .navbar-expand-lg .navbar-toggler {
            display: none;
        }
    }

    @media (max-width: 991px) {
        #navbarSupportedContent {
            display: none;
        }
    }
</style>
<nav class="navbar navbar-expand-lg">
    <div class="navbar-brand">
        <img class="user-avatar" src="/images/avatar.png" alt="å¤´åƒ">
        <div class="site-name gt-c-content-color-first">
            é¸¡æ¯›è’œçš®äº‹(â—&#39;â—¡&#39;â—)
        </div>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars gt-c-content-color-first" style="font-size: 18px"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <div class="navbar-nav mr-auto" style="text-align: center">
            
            <div class="nav-item">
                
                <a href="/" class="menu gt-a-link">
                    é¦–é¡µ
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/tags" class="menu gt-a-link">
                    æ ‡ç­¾
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/archives" class="menu gt-a-link">
                    å½’æ¡£
                </a>
                
            </div>
            
            <div class="nav-item">
                
                <a href="/post/about" class="menu gt-a-link">
                    å…³äº
                </a>
                
            </div>
            
        </div>
        <div style="text-align: center">
            <form id="gridea-search-form" style="position: relative" data-update="1689146956047"
                action="/search/index.html">
                <input class="search-input" autocomplete="off" spellcheck="false" name="q" placeholder="æœç´¢æ–‡ç« " />
                <i class="fas fa-search gt-c-content-color-first" style="position: absolute; top: 9px; left: 10px;"></i>
            </form>
        </div>
    </div>
</nav>
<script>
    /* ç§»åŠ¨ç«¯å¯¼èˆªæ å±•å¼€/æ”¶èµ·åˆ‡æ¢ */
    document.getElementById('changeNavbar').onclick = function () {
        var element = document.getElementById('navbarSupportedContent');
        if (element.style.display === 'none' || element.style.display === '') {
            element.style.display = 'block';
        } else {
            element.style.display = 'none';
        }
    }
</script>
    <div class="post-container">
        <div class="post-detail gt-bg-theme-color-second">
            <article class="gt-post-content">
                <h2 class="post-title">
                    MySqlå­¦ä¹ ä¹‹è·¯(åäº”)ï¼šæ…¢æŸ¥è¯¢æ—¥å¿—
                </h2>
                <div class="post-info">
                    <time class="post-time gt-c-content-color-first">
                        Â· 2022-12-29 Â·
                    </time>
                    
                        <a href="http://mofish.pily.life/tag/YVLEbqd3K/" class="post-tags">
                            # mysql
                        </a>
                    
                </div>
                <div class="post-content">
                    <p>â„ï¸æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œæ˜¯ç”¨æ¥è®°å½•MySqlä¸­å“åº”æ—¶é—´è¶…è¿‡é˜ˆå€¼çš„è¯­å¥ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä¼˜åŒ–MySqlçš„ä¸€ä¸ªé‡è¦æ‰‹æ®µï¼Œæ¥ä¸‹æ¥let's look lookï¼</p>
<!-- more -->
<p>ä¸Šé¢æåˆ°çš„<code>å“åº”æ—¶é—´è¶…è¿‡çš„é˜ˆå€¼</code>ï¼Œå…·ä½“æŒ‡â˜è¿è¡Œæ—¶é—´è¶…è¿‡<code>long_query_time</code>å€¼çš„SQLï¼Œåˆ™ä¼šè¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼Œå…¶é»˜è®¤å€¼ä¸º<code>10</code>ã€‚</p>
<p>å®ƒçš„ä¸»è¦ä½œç”¨æ˜¯å¸®åŠ©æˆ‘ä»¬å‘ç°å“ªäº›æ‰§è¡Œæ—¶é—´ç‰¹åˆ«é•¿çš„SQLæŸ¥è¯¢ï¼Œå¹¶ä¸”æœ‰é’ˆå¯¹æ€§åœ°ä¼˜åŒ–ï¼Œä»è€Œæé«˜ç³»ç»Ÿçš„æ•´ä½“æ•ˆç‡ã€‚å½“æˆ‘ä»¬çš„æ•°æ®åº“æœåŠ¡å™¨å‘ç”Ÿé˜»å¡ã€è¿è¡Œå˜æ…¢çš„æ—¶å€™ï¼Œæ£€æŸ¥ä¸€ä¸‹æ…¢æŸ¥è¯¢æ—¥å¿—ï¼Œç»“åˆä¸€ä¸‹<code>explain</code>è¿›è¡Œå…¨é¢åˆ†æã€‚</p>
<hr>
<h1 id="ä¸€-å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å‚æ•°">ä¸€ã€å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å‚æ•°</h1>
<p>é»˜è®¤æƒ…å†µä¸‹ï¼ŒMySqlæ˜¯<code>æ²¡æœ‰å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—</code>çš„ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨æ¥è®¾ç½®è¿™ä¸ªå‚æ•°ã€‚<code>å¦‚æœä¸æ˜¯è°ƒä¼˜éœ€è¦ï¼Œä¸€èˆ¬ä¸å»ºè®®å¯åŠ¨è¯¥å‚æ•°</code>ï¼Œå› ä¸ºå¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—æˆ–å¤šæˆ–å°‘ä¼šå¸¦æ¥ä¸€å®šçš„æ€§èƒ½å½±å“ã€‚</p>
<pre><code class="language-sql">-- å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—ï¼ŒOFF-å…³é—­ï¼ŒON-å¼€å¯
mysql&gt; set global slow_query_log='ON';

-- æ£€æŸ¥æ˜¯å¦å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—åŠæ—¥å¿—ä½ç½®
mysql&gt; show variables like '%slow_query_log%';
+---------------------+---------------------------------+
| Variable_name       | Value                           |
+---------------------+---------------------------------+
| slow_query_log      | ON                              |
| slow_query_log_file | /www/server/data/mysql-slow.log |
+---------------------+---------------------------------+

-- è®¾ç½®æ…¢æŸ¥è¯¢æ—¶é—´é˜ˆå€¼
#æµ‹è¯•å‘ç°ï¼šè®¾ç½®globalçš„æ–¹å¼å¯¹å½“å‰sessionçš„long_query_timeå¤±æ•ˆã€‚å¯¹æ–°è¿æ¥çš„å®¢æˆ·ç«¯æœ‰æ•ˆã€‚æ‰€ä»¥å¯ä»¥ä¸€å¹¶

mysql &gt; set global long_query_time = 1;
mysql&gt; show global variables like '%long_query_time%';

mysql&gt; set long_query_time=1;
mysql&gt; show variables like '%long_query_time%';

-- æŸ¥è¯¢å½“å‰ç³»ç»Ÿä¸­æœ‰å¤šå°‘æ¡æ…¢æŸ¥è¯¢è®°å½•
mysql&gt; SHOW GLOBAL STATUS LIKE '%Slow_queries%';
</code></pre>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ç›´æ¥è®¾ç½®my.cnfæ–‡ä»¶ï¼Œç„¶åé‡å¯MySqlæœåŠ¡å™¨ä½¿é…ç½®ç”Ÿæ•ˆï¼š</p>
<pre><code class="language-sql">[mysqld]
slow_query_log=ON  # å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—å¼€å…³
slow_query_log_file=/var/lib/mysql/atguigu-low.log  # æ…¢æŸ¥è¯¢æ—¥å¿—çš„ç›®å½•å’Œæ–‡ä»¶åä¿¡æ¯
long_query_time=3  # è®¾ç½®æ…¢æŸ¥è¯¢çš„é˜ˆå€¼ä¸º3ç§’ï¼Œè¶…å‡ºæ­¤è®¾å®šå€¼çš„SQLå³è¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—
log_output=FILE
</code></pre>
<hr>
<h1 id="äºŒ-æ¡ˆä¾‹æ¼”ç¤º">äºŒã€æ¡ˆä¾‹æ¼”ç¤º</h1>
<p>é¦–å…ˆåˆ›å»ºä¸€ä¸‹æ¼”ç¤ºçš„æ•°æ®è¡¨ï¼Œç„¶åå¡«å……ä¸€ä¸‹æ•°æ®ã€‚</p>
<pre><code class="language-sql">-- å»ºè¡¨
CREATE TABLE `student` (
    `id` INT(11) NOT NULL AUTO_INCREMENT,
    `stuno` INT NOT NULL ,
    `name` VARCHAR(20) DEFAULT NULL,
    `age` INT(3) DEFAULT NULL,
    `classId` INT(11) DEFAULT NULL,
    PRIMARY KEY (`id`)
) ENGINE=INNODB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8;

-- è®¾ç½®å‚æ•° log_bin_trust_function_creatorsï¼ˆThis function has none of DETERMINISTIC......ï¼‰
set global log_bin_trust_function_creators=1; # ä¸åŠ globalåªæ˜¯å½“å‰çª—å£æœ‰æ•ˆã€‚

-- éšæœºäº§ç”Ÿå­—ç¬¦ä¸²ï¼š
DELIMITER //
CREATE FUNCTION rand_string(n INT)
    RETURNS VARCHAR(255) #è¯¥å‡½æ•°ä¼šè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²
BEGIN
    DECLARE chars_str VARCHAR(100) DEFAULT
'abcdefghijklmnopqrstuvwxyzABCDEFJHIJKLMNOPQRSTUVWXYZ';
    DECLARE return_str VARCHAR(255) DEFAULT '';
    DECLARE i INT DEFAULT 0;
    WHILE i &lt; n DO
        SET return_str =CONCAT(return_str,SUBSTRING(chars_str,FLOOR(1+RAND()*52),1));
        SET i = i + 1;
    END WHILE;
    RETURN return_str;
END //
DELIMITER ;

# æµ‹è¯•
SELECT rand_string(10);

-- äº§ç”Ÿéšæœºæ•°å€¼ï¼š
DELIMITER //
CREATE FUNCTION rand_num (from_num INT ,to_num INT) RETURNS INT(11)
BEGIN
    DECLARE i INT DEFAULT 0;
    SET i = FLOOR(from_num +RAND()*(to_num - from_num+1)) ;
    RETURN i;
END //
DELIMITER ;

#æµ‹è¯•ï¼š
SELECT rand_num(10,100);

-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹
DELIMITER //
CREATE PROCEDURE insert_stu1( START INT , max_num INT )
BEGIN
DECLARE i INT DEFAULT 0;
    SET autocommit = 0; #è®¾ç½®æ‰‹åŠ¨æäº¤äº‹åŠ¡
    REPEAT #å¾ªç¯
    SET i = i + 1; #èµ‹å€¼
    INSERT INTO student (stuno, NAME ,age ,classId ) VALUES
    ((START+i),rand_string(6),rand_num(10,100),rand_num(10,1000));
    UNTIL i = max_num
    END REPEAT;
    COMMIT; #æäº¤äº‹åŠ¡
END //
DELIMITER ;

-- è°ƒç”¨åˆšåˆšå†™å¥½çš„å‡½æ•°, 8000000æ¡è®°å½•,ä»100001å·å¼€å§‹
CALL insert_stu1(100001,8000000);
</code></pre>
<hr>
<h1 id="ä¸‰-æµ‹è¯•åŠåˆ†æ">ä¸‰ã€æµ‹è¯•åŠåˆ†æ</h1>
<pre><code class="language-sql">mysql&gt; SELECT * FROM student WHERE stuno = 3455655;
+---------+---------+--------+------+---------+
| id      | stuno   | name   | age  | classId |
+---------+---------+--------+------+---------+
| 3355654 | 3455655 | wIYWKN |   70 |      58 |
+---------+---------+--------+------+---------+
1 row in set (2.16 sec)

mysql&gt; SELECT * FROM student WHERE name = 'oQmLUr';
+---------+---------+--------+------+---------+
| id      | stuno   | name   | age  | classId |
+---------+---------+--------+------+---------+
|  608599 |  708600 | OQMlUR |   54 |     916 |
| 1320974 | 1420975 | OQMlUR |   56 |      57 |
| 1646809 | 1746810 | Oqmlur |   57 |     596 |
| 1733845 | 1833846 | Oqmlur |   53 |     382 |
| 1878203 | 1978204 | oqMLuR |   11 |     546 |
| 2209155 | 2309156 | Oqmlur |   56 |     531 |
| 2408935 | 2508936 | oQmLUr |   96 |     782 |
| 4425349 | 4525350 | Oqmlur |   50 |     252 |
| 5053772 | 5153773 | oqMLuR |   10 |     494 |
| 5065961 | 5165962 | oQmLUr |   96 |     780 |
| 5074254 | 5174255 | oQmLUr |   98 |     866 |
| 5980254 | 6080255 | oqMLuR |   11 |     551 |
| 6114492 | 6214493 | oQmLUr |   10 |      30 |
| 6909435 | 7009436 | oQmLUr |   98 |     853 |
| 7073314 | 7173315 | Oqmlur |   51 |     309 |
+---------+---------+--------+------+---------+
15 rows in set (2.28 sec)
</code></pre>
<p>ä¸Šé¢çš„æŸ¥è¯¢ç»“æœå·²ç»è¶…è¿‡<code>long_query_time</code>çš„é˜ˆå€¼æ—¶é—´<code>1s</code>ï¼Œé‚£ä¹ˆåº”è¯¥å½“è®°å½•è¿›æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ã€‚</p>
<blockquote>
<p>æ³¨æ„ï¼š<br>
é™¤äº†ä¸Šè¿°å˜é‡å¤–ï¼Œæ§åˆ¶æ…¢æŸ¥è¯¢æ—¥å¿—çš„è¿˜æœ‰ä¸€ä¸ªç³»ç»Ÿå˜é‡ï¼š<code>min_examined_row_limit</code>ï¼Œ<code>æŒ‡çš„æ˜¯æ‰«æè¿‡çš„æœ€å°‘è®°å½•æ•°</code>ã€‚è¿™ä¸ªå˜é‡å’ŒæŸ¥è¯¢æ‰§è¡Œæ—¶é—´ï¼Œå…±åŒç»„æˆåˆ¤æ–­ä¸€ä¸ªæŸ¥è¯¢æ˜¯å¦æ˜¯æ…¢æŸ¥è¯¢çš„æ¡ä»¶ã€‚<br>
å¦‚æœæŸ¥è¯¢æ‰«æè¿‡çš„è®°å½•æ•°å¤§äºç­‰äºè¿™ä¸ªå˜é‡çš„å€¼ï¼Œå¹¶ä¸”æŸ¥è¯¢æ‰§è¡Œæ—¶é—´è¶…è¿‡<code>long_query_time</code>çš„å€¼ï¼Œé‚£ä¹ˆï¼Œè¿™ä¸ªæŸ¥è¯¢å°±è¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ï¼Œåä¹‹åˆ™ä¸ä¼šè¢«è®°å½•ä¸‹æ¥ã€‚</p>
</blockquote>
<pre><code class="language-sql">-- æŸ¥è¯¢æ‰«ææœ€å°‘è®°å½•æ•°
mysql&gt; show variables like 'min%';
+------------------------+-------+
| Variable_name          | Value |
+------------------------+-------+
| min_examined_row_limit | 0     |
+------------------------+-------+

-- è®¾ç½®æ‰«ææœ€å°‘è®°å½•ğŸ“–
mysql&gt; set min_examined_row_limit=1; 
</code></pre>
<blockquote>
<p>è¿™ä¸ªå€¼é»˜è®¤ä¸º0ï¼Œä¸<code>long_query_time=1</code>ç»„åˆåœ¨ä¸€èµ·ï¼Œè¡¨ç¤ºåªè¦æŸ¥è¯¢çš„æ‰§è¡Œæ—¶é—´æŸ¥è¿‡1ç§’ï¼Œå“ªæ€•ä¸€ä¸ªè®°å½•é¡µæ²¡æœ‰æ‰«æè¿‡ï¼Œéƒ½è¦è¢«è®°å½•åˆ°æ…¢æŸ¥è¯¢æ—¥å¿—ä¸­ã€‚</p>
</blockquote>
<hr>
<h1 id="å››-æ…¢æŸ¥è¯¢åˆ†æå·¥å…·mysqldumpslow">å››ã€æ…¢æŸ¥è¯¢åˆ†æå·¥å…·ï¼šmysqldumpslow</h1>
<p>åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ï¼Œå¦‚æœè¦æ‰‹å·¥åˆ†ææ—¥å¿—ï¼ŒæŸ¥æ‰¾ã€åˆ†æSQLï¼Œæ˜¾ç„¶æ˜¯ä¸ªä½“åŠ›æ´»ï¼ŒMySQLæä¾›äº†æ—¥å¿—åˆ†æå·¥å…· <code>mysqldumpslow</code> ã€‚</p>
<p>mysqldumpslow å‘½ä»¤çš„å…·ä½“å‚æ•°å¦‚ä¸‹ï¼š</p>
<ul>
<li>-a: ä¸å°†æ•°å­—æŠ½è±¡æˆNï¼Œå­—ç¬¦ä¸²æŠ½è±¡æˆS</li>
<li>-s: æ˜¯è¡¨ç¤ºæŒ‰ç…§ä½•ç§æ–¹å¼æ’åºï¼š
<ul>
<li>c: è®¿é—®æ¬¡æ•°</li>
<li>l: é”å®šæ—¶é—´</li>
<li>r: è¿”å›è®°å½•</li>
<li>t: æŸ¥è¯¢æ—¶é—´</li>
<li>al:å¹³å‡é”å®šæ—¶é—´</li>
<li>ar:å¹³å‡è¿”å›è®°å½•æ•°</li>
<li>at:å¹³å‡æŸ¥è¯¢æ—¶é—´ ï¼ˆé»˜è®¤æ–¹å¼ï¼‰</li>
<li>ac:å¹³å‡æŸ¥è¯¢æ¬¡æ•°</li>
</ul>
</li>
<li>-t: å³ä¸ºè¿”å›å‰é¢å¤šå°‘æ¡çš„æ•°æ®ï¼›</li>
<li>-g: åè¾¹æ­é…ä¸€ä¸ªæ­£åˆ™åŒ¹é…æ¨¡å¼ï¼Œå¤§å°å†™ä¸æ•æ„Ÿçš„ï¼›</li>
</ul>
<pre><code class="language-properties">ä¸¾ä¾‹ï¼šæˆ‘ä»¬æƒ³è¦æŒ‰ç…§æŸ¥è¯¢æ—¶é—´æ’åºï¼ŒæŸ¥çœ‹å‰äº”æ¡ SQL è¯­å¥ï¼Œè¿™æ ·å†™å³å¯ï¼š
mysqldumpslow -s t -t 5 /usr/local/mysql/data/moyuxingdeiMac-slow.log

Reading mysql slow query log from /usr/local/mysql/data/moyuxingdeiMac-slow.log
Count: 1  Time=2.26s (2s)  Lock=0.00s (0s)  Rows=15.0 (15), root[root]@localhost
  SELECT * FROM student WHERE name = 'S'

Count: 1  Time=2.14s (2s)  Lock=0.00s (0s)  Rows=1.0 (1), root[root]@localhost
  SELECT * FROM student WHERE stuno = N

Died at ./mysqldumpslow line 162, &lt;&gt; chunk 2.
</code></pre>
<p><strong>å·¥ä½œå¸¸ç”¨å‚è€ƒï¼š</strong></p>
<pre><code class="language-properties">#å¾—åˆ°è¿”å›è®°å½•é›†æœ€å¤šçš„10ä¸ªSQL
mysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log

#å¾—åˆ°è®¿é—®æ¬¡æ•°æœ€å¤šçš„10ä¸ªSQL
mysqldumpslow -s c -t 10 /var/lib/mysql/atguigu-slow.log

#å¾—åˆ°æŒ‰ç…§æ—¶é—´æ’åºçš„å‰10æ¡é‡Œé¢å«æœ‰å·¦è¿æ¥çš„æŸ¥è¯¢è¯­å¥
mysqldumpslow -s t -t 10 -g &quot;left join&quot; /var/lib/mysql/atguigu-slow.log

#å¦å¤–å»ºè®®åœ¨ä½¿ç”¨è¿™äº›å‘½ä»¤æ—¶ç»“åˆ | å’Œmore ä½¿ç”¨ ï¼Œå¦åˆ™æœ‰å¯èƒ½å‡ºç°çˆ†å±æƒ…å†µ
mysqldumpslow -s r -t 10 /var/lib/mysql/atguigu-slow.log | more

# åˆ é™¤æ…¢æŸ¥è¯¢æ—¥å¿—
mysqladmin -uroot -p flush-logs slow
</code></pre>

                </div>
            </article>
        </div>

        
            <div class="next-post">
                <div class="next gt-c-content-color-first">ä¸‹ä¸€ç¯‡</div>
                <a href="http://mofish.pily.life/post/mysql_learning_14/" class="post-title gt-a-link">
                    MySqlå­¦ä¹ ä¹‹è·¯(åå››)ï¼šæ€§èƒ½åˆ†æå·¥ä½œçš„ä½¿ç”¨
                </a>
            </div>
        

        

        

        

        <div class="site-footer gt-c-content-color-first">
    <div class="slogan gt-c-content-color-first">æ‰“å·¥äººï¼æ‰“å·¥é­‚ï¼æˆ‘çˆ±æ‰“å·¥ï¼</div>
    <div class="social-container">
        
            
        
            
        
            
        
            
        
            
        
            
        
    </div>
    <div class="footer-info">
        Powered by <a href="https://github.com/myx1002/myx1002.github.io" target="_blank">Moyuxing</a>
    </div>
    <div>
        Theme by <a href="https://imhanjie.com/" target="_blank">imhanjie</a>, Powered by <a
                href="https://github.com/getgridea/gridea" target="_blank">Gridea | <a href="http://mofish.pily.life/atom.xml" target="_blank">RSS</a></a>
    </div>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>

    </div>
</div>
</body>
</html>
